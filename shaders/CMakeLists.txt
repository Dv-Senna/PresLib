cmake_minimum_required(VERSION 3.20)


set(SHADERS_NAME ${PROJECT_NAME}_shaders)
set(SHADERS_VERSION ${PROJECT_VERSION})
set(SHADERS_VERSION_MAJOR ${PROJECT_VERSION_MAJOR})
set(SHADERS_VERSION_MINOR ${PROJECT_VERSION_MINOR})
set(SHADERS_VERSION_PATCH ${PROJECT_VERSION_PATCH})
string(TOUPPER ${SHADERS_NAME} SHADERS_NAME_UPPERCASE)


file(GLOB_RECURSE VERT_SHADER_SRC *.vert)
file(GLOB_RECURSE FRAG_SHADER_SRC *.frag)

message("----------------- SHADERS SOURCES : ${CMAKE_SOURCE_DIR} -----------------")
message("Test debug $<$<CONFIG:Debug>:-g>")

add_custom_target(${SHADERS_NAME}
	DEPENDS
		${VERT_SHADER_SRC}
		${FRAG_SHADER_SRC}
	WORKING_DIRECTORY
		${CMAKE_SOURCE_DIR}/shaders
	COMMAND
		${Vulkan_GLSLC_EXECUTABLE} -c ${VERT_SHADER_SRC} ${FRAG_SHADER_SRC} $<$<CONFIG:Debug>:-g>
)
